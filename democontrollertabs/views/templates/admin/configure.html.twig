{#**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License 3.0 (AFL-3.0).
 * It is also available through the world-wide-web at this URL: https://opensource.org/licenses/AFL-3.0
 *#}

{% extends '@Modules/democontrollertabs/views/templates/admin/layout.html.twig' %}

{% block controllerTitle %}{{ 'Configure controller'|trans({}, 'Modules.Controllertab.Admin') }}{% endblock %}

{% block controllerDescription %}
    <div class="row justify-content-center">
        <div class="col">
            <h2>Configure controller</h2>

            <h3>Routing file</h3>
            <pre>
                <code class="yaml">
# {your_module}/config/routes.yml
ps_controller_tabs_configure_index:
    path: /configure-tabs
    methods: [GET]
    defaults:
        _controller: 'PrestaShop\Module\DemoControllerTabs\Controller\Admin\ConfigureController::indexAction'
        _legacy_controller: 'AdminDemoControllerTabsConfigure'
        _legacy_link: 'AdminDemoControllerTabsConfigure'
                </code>
            </pre>

            <h3>Securized Controller</h3>
            <pre>
                <code class="php">
class ConfigureController extends FrameworkBundleAdminController
{
    /**
     * @AdminSecurity("is_granted('read', request.get('_legacy_controller'))")
     *
     * @return Response
     */
    public function indexAction()
    {
        return $this->render('@Modules/democontrollertabs/views/templates/admin/configure.html.twig');
    }
}                </code>
            </pre>

            <h3>Automatic Tabs registration</h3>
            <pre>
                <code class="php">
        // Inside module class constructor
        $tabNames = [];
        foreach (Language::getLanguages(true) as $lang) {
            $tabNames[$lang['locale']] = $this->trans('Demo Controller Tabs', array(), 'Modules.Democontrollertabs.Admin', $lang['locale']);
        }
        $this->tabs = [
            [
                'route_name' => 'ps_controller_tabs_configure_index',
                'class_name' => 'AdminDemoControllerTabsConfigure',
                'visible' => true,
                'name' => $tabNames,
            ],
        ];
                </code>
            </pre>

            <h3>Redirection for module configuration</h3>
            <pre>
                <code class="php">
    // In module class
    public function getContent()
    {
        Tools::redirectAdmin(
            $this->context->link->getAdminLink('AdminDemoControllerTabsConfigure')
        );
    }
                </code>
            </pre>
        </div>
    </div>
{% endblock %}
